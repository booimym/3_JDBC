<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
<comment>movie-query.xml</comment>


<entry key = "selectAllMovie">
SELECT MOVIE_NO, MOVIE_TITLE, MOVIE_CONTENT, RUNNING_TIME, MOVIE_YEAR, RATING,COUNTRY
FROM MOVIE
</entry>

<entry key = "selectMovie">
SELECT MOVIE_NO, MOVIE_TITLE, MOVIE_CONTENT, RUNNING_TIME, MOVIE_YEAR, RATING,COUNTRY,ROUND(AVG(MOVIE_SCORE),1)"평점"
FROM MOVIE 
JOIN TIMETABLE USING (MOVIE_NO)
JOIN RESERVATION USING(ALL_MOVIES_NO)
WHERE MOVIE_TITLE = ?
GROUP BY MOVIE_NO, MOVIE_TITLE, MOVIE_CONTENT, RUNNING_TIME, MOVIE_YEAR, RATING,COUNTRY
</entry> 

<entry key = "selectTop3">
<![CDATA[
SELECT MOVIE_TITLE, "예매수"
FROM (SELECT MOVIE_TITLE,COUNT(*) "예매수"
	FROM RESERVATION 
	JOIN TIMETABLE USING (ALL_MOVIES_NO)
	JOIN MOVIE USING (MOVIE_NO)
	GROUP BY MOVIE_TITLE
	ORDER BY "예매수" DESC)
WHERE ROWNUM <= 3]]>
</entry>

<entry key = "selectScoreTop3">
<![CDATA[
SELECT MOVIE_TITLE ,"평점"
FROM (SELECT MOVIE_TITLE ,ROUND(AVG(MOVIE_SCORE),1) "평점" FROM RESERVATION
JOIN TIMETABLE USING (ALL_MOVIES_NO)
JOIN MOVIE USING (MOVIE_NO)
GROUP BY MOVIE_TITLE 
ORDER BY "평점" DESC)
WHERE ROWNUM <=3]]>
</entry>
</properties>
